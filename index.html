<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>scratchblocks AI Generator</title>
  <meta name="description" content="Sử dụng scratchblocks để viết hình ảnh của các tập lệnh Scratch trong các bài đăng trên diễn đàn.">
  <!-- Liên kết tới file CSS ngoài -->
  <link rel="stylesheet" href="style.css">
  
  <!-- Tải tất cả các thư viện và mã nguồn cần thiết vào đây THEO ĐÚNG THỨ TỰ -->
  <!-- 1. Thư viện scratchblocks chính -->
  <script src="./build/scratchblocks.min.js"></script>
  <script src="./build/translations-all.js"></script>
  <!-- 2. Thư viện phụ trợ cho việc xuất file -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <!-- 3. Mã nguồn của trình biên dịch SB3 -->
  <script src="./opcodeMap.js"></script>
  <script src="./sb3-compiler.js"></script>

</head>
<body>

<h1>
  <a id="title" href="/">scratchblocks dev</a>
  <span>
    <a target="_blank" href="https://en.scratch-wiki.info/wiki/List_of_Blocks">Trợ giúp</a>
    <a target="_blank" href="https://github.com/scratchblocks/scratchblocks">GitHub</a>
  </span>
</h1>

<div id="main-container">
  <div id="side">
    <div id="ai-section">
      <h4>Tạo code với AI</h4>
      <textarea id="ai-prompt" rows="3" placeholder="Nhập mô tả của bạn ở đây, hoặc tải ảnh lên để AI phân tích..."></textarea>
      <div id="ai-image-upload-wrapper">
        <button id="ai-upload-btn">Tải ảnh lên</button>
        <input type="file" id="ai-image-input" accept="image/*" style="display: none;">
        <button id="remove-image-btn">Xóa ảnh</button>
      </div>
      <img id="ai-image-preview" />
      <button id="ai-generate-btn" style="width: 100%;">Tạo mã</button>
      <small id="ai-status"></small>
    </div>
    <div id="choose-lang-wrapper">
      <select id="choose-lang">
        <option value="">English</option>
      </select>
      <small id="lang-status"></small>
    </div>
    <div id="choose-style-wrapper">
      <select id="choose-style">
        <option value="scratch3">Scratch 3.0</option>
        <option value="scratch2">Scratch 2.0</option>
        <option value="scratch3-high-contrast">Scratch 3.0 Độ tương phản cao</option>
      </select>
    </div>
    <div class="export-buttons">
        <button id="export-svg">Export SVG</button>
        <button id="export-png">Export PNG</button>
        <button id="export-sb3">Export .sb3</button>
    </div>
    <textarea id="editor" rows="15"></textarea>
  </div>
  <pre id="preview" class="blocks"></pre>
</div>

<!-- Liên kết tới file JavaScript ngoài -->
<script src="script.js" defer></script>

</body>
</html>